<template>
    <lightning-card title="Appeals" icon-name="standard:case">
        <h1 class="slds-text-heading_large slds-m-around_medium">Appeals on all Claims</h1>

        <!-- Loading spinner -->
        <template if:true={isLoading}>
            <lightning-spinner alternative-text="Loading" size="small"></lightning-spinner>
        </template>

        <!-- Display appeals list -->
        <template if:true={appeals}>
            <ul class="slds-list slds-list_vertical slds-box slds-m-around_medium">
                <template for:each={appeals} for:item="appeal">
                    <li key={appeal.Id} class="slds-item slds-p-around_small">
                        <div class="slds-text-heading_small">Case: {appeal.Related_Case__r.CaseNumber}</div>
                        <div class="slds-text-body_regular">Filed Date: {appeal.Filed_Date__c}</div>
                        <div class="slds-text-body_regular">Appeal Type: {appeal.Appeal_Type__c}</div>
                        <div class="slds-text-body_small">Appeal Status: {appeal.Appeal_Status__c}</div>
                        <!-- Add a button to upload a file -->
                        <lightning-button label="Add File" onclick={handleAddAttachment} data-id={appeal.Id} class="slds-m-top_small"></lightning-button>
                        <!-- Hidden file input -->
                        <input type="file" data-id={appeal.Id} class="slds-hidden" onchange={handleFileChange} />
                    </li>
                </template>
            </ul>
        </template>

        <!-- Display error message -->
        <template if:true={error}>
            <div class="slds-text-color_error slds-m-around_medium">
                An error occurred while loading appeals: {error.body.message}
            </div>
        </template>

        <!-- Display message if no appeals are found -->
        <template if:false={appeals}>
            <div class="slds-text-body_regular slds-m-around_medium">
                No appeals found.
            </div>
        </template>
    </lightning-card>
</template>